{% extends "_layout.twig" %}

{% block content %}
{% set registrationAllowed = craft.app.config.general.allowPublicRegistration ?? false %}

{% if not registrationAllowed %}
        <section class="recipe-single" style="max-width:520px;margin:auto;">
            <h1>Registration disabled</h1>
            <p class="muted">Public registration is currently turned off. Enable it in Settings → Users to use this page.</p>
        </section>
    {% else %}
        <section class="recipe-single" style="max-width:520px;margin:auto;">
            <h1>Create account</h1>
            <p class="muted">Store your favorites, follow authors, and unlock personalized collections.</p>

            {% if craft.app.session.hasFlash('error') %}
                <p style="color:#c00;font-weight:600;">{{ craft.app.session.getFlash('error') }}</p>
            {% endif %}

            <form method="post" accept-charset="UTF-8" style="display:flex;flex-direction:column;gap:1rem;">
                {{ csrfInput() }}
                {{ actionInput('users/save-user') }}
                {{ redirectInput('account') }}
                {{ hiddenInput('requirePasswordReset', false) }}

                <label>
                    <span>Full name</span>
                    <input type="text" name="fullName" required placeholder="Taylor Chef" style="width:100%;padding:0.65rem;border-radius:12px;border:1px solid rgba(0,0,0,0.15);">
                </label>

                <label>
                    <span>Email</span>
                    <input type="email" name="email" required placeholder="you@example.com" style="width:100%;padding:0.65rem;border-radius:12px;border:1px solid rgba(0,0,0,0.15);">
                </label>

                <label>
                    <span>Username</span>
                    <input type="text" name="username" required placeholder="taylorchef" style="width:100%;padding:0.65rem;border-radius:12px;border:1px solid rgba(0,0,0,0.15);">
                </label>

                <label>
                    <span>Password</span>
                    <input type="password" name="password" required placeholder="••••••••" style="width:100%;padding:0.65rem;border-radius:12px;border:1px solid rgba(0,0,0,0.15);">
                </label>

                <button type="submit" class="btn-primary" style="border:none;">Create account</button>
            </form>

            <p class="muted" style="margin-top:1.5rem;">Already registered? <a href="{{ url('login') }}">Log in</a>.</p>
        </section>
    {% endif %}
{% endblock %}
